---
- name: Update apt cache
  ansible.builtin.apt:
    update_cache: yes
  changed_when: false

- name: Check for available updates
  ansible.builtin.shell: apt list --upgradable 2>/dev/null | tail -n +2
  register: apt_updates
  changed_when: false

- name: Show available updates
  ansible.builtin.debug:
    msg: "{{ apt_updates.stdout_lines | default(['No updates available']) }}"
